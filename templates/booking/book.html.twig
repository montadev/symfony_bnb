{% extends 'base.html.twig' %}

{% block stylesheets %}

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/css/bootstrap-datepicker.min.css">

{% endblock %}

{% block title %}Réserver l'annonce : {{ad.title}} {% endblock %}

{% block body %}
  <div class="container">
  
    <h1>Réservez pour l'annonce {{ad.title}}</h1>

    <p>Vous etes sur le point de réserver le bien de {{ad.author.firstName}} {{ad.author.firstName}}
    <strong>, dites nous tout , on s'occupe du reste !</strong></p>

    {{form_start(form)}}

      <div class="alert alert-light">
      <h2>Commencez pour nous dire quelles sont les dates qui vous intéressent</h2>

       <div class="row">

        <div class="col">
        {{form_row(form.startDate)}}
        </div>

        <div class="col">
        {{form_row(form.endTime)}}
        </div>

       </div>
      </div>

      <h4>Montant de séjour : <span id="amount">...</span> &euro;</h4>
      <span id="days">0</span> nuit(s) à {{ad.price}} / nuit

      <h2>Vous avez un commentaire ?</h2>

      {{form_row(form.comment)}}

      <h2>Vous avez terminé</h2>

      <p>Vacances de reve ? Hébergement pour le boulot ? Peu importe , onest avec vous</p>

      <button type="submit" class="btn btn-success">Je réserve !</button>

      {{form_end(form)}}
  </div>
{% endblock %}

{% block javascripts %}

<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/js/bootstrap-datepicker.min.js" integrity="sha256-bqVeqGdJ7h/lYPq6xrPv/YGzMEb6dNxlfiTUHSgRCp8=" crossorigin="anonymous"></script>

<script>

    $(document).ready(function(){

    $('#booking_startDate , #booking_endTime').datepicker({
        format: 'dd/mm/yyyy',
        datesDisabled: [{% for day in ad.notAvailableDays %}

                        "{{day| date('d/m/Y')}}",
                       {% endfor %}],
                      
        startDate: new Date() 
    });

    });


</script>
{% endblock %}
